# WIN5 人気順位合計値パターン計算アプリ : streamlit-win5

## 概要

このアプリは、日本中央競馬会（JRA）のWIN5（5レースの1着馬を予想する馬券）の予想支援ツールです。ユーザーが指定した合計値やレースごとの条件に基づいて、WIN5の人気順位の組み合わせを計算し、結果を提示します。

競馬ファンが効率的にWIN5の組み合わせを分析・絞り込むための補助ツールとして利用できます。

主な機能

1. 基本設定

    合計値:

    各レースの1着馬の人気順位の合計を指定します。

    入力範囲: 5～100。

    人気順位の最大値:

    各レースの人気順位の上限を指定します。

    入力範囲: 2～50。

2. レースごとの条件設定

    各レースの1着馬の人気順位を指定できます。

    指定なしの場合はデフォルトで「0」と入力します。

    入力範囲: 0（指定なし）～設定した人気順位の最大値。

    各レースの入力欄は横並びに表示され、入力が直感的に行えます。

3. パターン計算

    入力された条件に基づいて、以下を計算します:

    未指定のレースで可能な人気順位の範囲:

    入力条件に基づいて計算された未指定のレースの可能な値の範囲を提示します。

    合計値を満たすパターン数:

    指定された条件を満たす人気順位の組み合わせを計算し、その数を表示します。

4. 結果の詳細表示

    条件を満たす組み合わせを表形式で表示します。

    100件以下の場合: 詳細を表形式で表示。

    100件を超える場合: 表示を省略し、メッセージを表示。

    固定された条件の視覚化:

    固定されたレースの列をグレー背景で強調表示し、条件を視覚的に確認できます。

5. エラーハンドリング

    無効な入力や計算中にエラーが発生した場合、適切なエラーメッセージを表示します。

    例: 条件が矛盾している場合や、計算範囲外の場合。

### ユーザーインターフェース

#### レイアウト

**基本設定:**

合計値と人気順位の最大値を横並びで表示。

レースごとの条件設定:

各レースの人気順位を横並びで入力可能。

**結果表示**

計算完了後、以下を表示:

条件を満たすパターン数。

未指定のレースで可能な値の範囲。

詳細結果（必要に応じて表形式）。

**使用技術**

Streamlit: Webアプリケーションフレームワーク。

Pandas: データ操作および表形式表示。

itertools: パターン生成と計算。

**使用方法**

アプリを起動:

streamlit run app.py

基本設定を入力:

合計値。

人気順位の最大値。

必要に応じて、各レースの条件を入力。

「計算」ボタンをクリック。

計算結果と詳細を確認。

拡張機能（今後の改善案）

過去データの分析:

過去のWIN5のデータを基にした予測機能の追加。

ビジュアル強化:

結果のグラフ表示や条件入力のスライダー形式対応。

スケーラビリティ:

計算負荷の高い条件に対応するための効率化。

まとめ

本アプリは、WIN5の予想支援ツールとして、条件に基づいた効率的なパターン計算と結果の視覚的な表示を提供します。競馬ファンの戦略的な馬券購入を支援するため、さらなる機能拡張を視野に入れています。


## 環境構築

### 初期設定

```bash
# 仮想環境の作成
python3.13 -m venv ./develop/venv

# 仮想環境を有効化
source ./develop/venv/bin/activate  # Linux/MacOS

pip install streamlit

# 依存関係の保存
pip freeze > ./app/requirements.txt

# ローカル環境での実行
uvicorn app.main:app --reload


```

### ２回目以降

```bash
# 仮想環境を有効化
source ./develop/venv/bin/activate  # Linux/MacOS

# 依存関係のインストール
pip install -r ./app/requirements.txt
```

### アプリケーションの起動

```bash
streamlit run app/win5_app.py
```
